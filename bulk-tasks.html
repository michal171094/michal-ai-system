<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>הוספת משימות קיימות - מיכל AI</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; text-align: center; }
        .section { margin-bottom: 30px; padding: 20px; border: 2px solid #e74c3c; border-radius: 8px; background: #fff5f5; }
        .section h2 { color: #e74c3c; margin-top: 0; }
        .task { margin: 10px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; background: #f9f9f9; }
        .task h3 { margin: 0 0 10px 0; color: #2980b9; }
        .task p { margin: 5px 0; }
        .priority { font-weight: bold; }
        .high { color: #e74c3c; }
        .medium { color: #f39c12; }
        .low { color: #27ae60; }
        button { padding: 15px 30px; font-size: 16px; border: none; border-radius: 5px; cursor: pointer; margin: 10px; }
        .btn-primary { background: #3498db; color: white; }
        .btn-success { background: #27ae60; color: white; }
        .btn-danger { background: #e74c3c; color: white; }
        #status { margin-top: 20px; padding: 15px; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .loading { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎯 הוספת המשימות הקיימות של מיכל</h1>
        
        <div class="section">
            <h2>📚 משימות אקדמיות ועבודות</h2>
            <div class="task">
                <h3>מרג'ורי - תרגום ואפוסטיל</h3>
                <p><strong>תיאור:</strong> טיפול בתרגום, בדיקת מסמכים, אפוסטיל, בירור התאמה לגרמניה</p>
                <p><strong>לקוח:</strong> מרג'ורי תרגום</p>
                <p><strong>סטטוס:</strong> מהלך מתגלגל - השלמות מול הלקוחה</p>
                <p class="priority medium">📅 עדיפות: בינונית</p>
            </div>
            
            <div class="task">
                <h3>כרמית - סמינריון עם הוספת מאמרים</h3>
                <p><strong>תיאור:</strong> הוספת מאמרים לסמינריון (צריך 8 מאמרים, להוסיף עוד 3), הפקת מסמך</p>
                <p><strong>לקוח:</strong> כרמית סמינר</p>
                <p><strong>דד-ליין:</strong> עד מחר בערב/טרם הגשה</p>
                <p class="priority high">🔥 עדיפות: גבוהה</p>
            </div>
            
            <div class="task">
                <h3>עבודה סמינריונית קבוצתית</h3>
                <p><strong>תיאור:</strong> סיום עבודה, מתן תמיכה אקדמית, פתרונות למשבר בין חברות</p>
                <p><strong>לקוח:</strong> קבוצת סמינריון</p>
                <p><strong>סטטוס:</strong> אין דדליין ספציפי</p>
                <p class="priority low">⚡ עדיפות: נמוכה</p>
            </div>
            
            <div class="task">
                <h3>ישראל - סמינר וועדה</h3>
                <p><strong>תיאור:</strong> שליחת טיוטות, אישור ועדה, טיפול במסמכים, התקדמות לפי הערות</p>
                <p><strong>לקוח:</strong> ישראל סמינר</p>
                <p><strong>התראה:</strong> "לא נשאר הרבה זמן.."</p>
                <p class="priority high">🔥 עדיפות: גבוהה</p>
            </div>
        </div>

        <div class="section">
            <h2>💰 חובות וגבייה</h2>
            <div class="task">
                <h3>coeo Inkasso - Ostrom GmbH</h3>
                <p><strong>מספר תיק:</strong> 1660002492</p>
                <p><strong>סכום:</strong> ~455€</p>
                <p><strong>סטטוס:</strong> בהתנגדות פעילה / בשלבי טיפול</p>
                <p class="priority medium">⚖️ עדיפות: בינונית</p>
            </div>
            
            <div class="task">
                <h3>PAIR Finance - Free2Move</h3>
                <p><strong>מספר תיק:</strong> 162857501033</p>
                <p><strong>סכום:</strong> ~45-69€</p>
                <p><strong>סטטוס:</strong> לא שולם, ממשיכים בהליכי גביה</p>
                <p class="priority medium">⚖️ עדיפות: בינונית</p>
            </div>
            
            <div class="task">
                <h3>PAIR Finance - Novum Bank Cashper</h3>
                <p><strong>מספר תיק:</strong> 168775195683</p>
                <p><strong>סכום:</strong> 208.60€</p>
                <p><strong>סטטוס:</strong> לא שולם, נשלחו הצעות פשרה</p>
                <p class="priority medium">⚖️ עדיפות: בינונית</p>
            </div>
            
            <div class="task">
                <h3>רשות האכיפה והגבייה - משרד הביטחון</h3>
                <p><strong>מספר תיק:</strong> 774243-03-25</p>
                <p><strong>סכום:</strong> ₪7,355.17</p>
                <p><strong>סטטוס:</strong> תיק טרום חוב/התראה/פתוח</p>
                <p class="priority high">🔥 עדיפות: גבוהה</p>
            </div>
            
            <div class="task">
                <h3>מנורה מבטחים - חובות ביטוח</h3>
                <p><strong>סכומים:</strong> ₪330.43, ₪326.02, ₪85.21</p>
                <p><strong>סטטוס:</strong> פתוח/דרישת תשלום עבור מספר פוליסות ביטוח</p>
                <p class="priority medium">⚖️ עדיפות: בינונית</p>
            </div>
        </div>

        <div class="section">
            <h2>🏢 בירוקרטיה ומוסדות</h2>
            <div class="task">
                <h3>TK - קופת חולים גרמניה</h3>
                <p><strong>מספר תיק:</strong> B268202260</p>
                <p><strong>סטטוס:</strong> בתהליך בירור בקשה/התנגדות</p>
                <p class="priority medium">📋 עדיפות: בינונית</p>
            </div>
            
            <div class="task">
                <h3>ביטוח לאומי - הגשת מסמכים</h3>
                <p><strong>מספר תיק:</strong> 897777</p>
                <p><strong>סטטוס:</strong> הגשת מסמכים/בתהליכי בדיקה</p>
                <p class="priority medium">📋 עדיפות: בינונית</p>
            </div>
            
            <div class="task">
                <h3>רשות האכיפה והגבייה - קנסות</h3>
                <p><strong>מספר תיק:</strong> 164025</p>
                <p><strong>סטטוס:</strong> טיפול בפניות/בחינה</p>
                <p class="priority medium">📋 עדיפות: בינונית</p>
            </div>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <button class="btn-success" onclick="addAllTasks()">✅ הוסף את כל המשימות</button>
            <button class="btn-primary" onclick="previewTasks()">👁️ תצוגה מקדימה</button>
            <button class="btn-danger" onclick="clearForm()">🗑️ נקה הכל</button>
        </div>

        <div id="status"></div>
    </div>

    <script>
        const tasks = [
            // Academic/Work tasks
            { 
                title: "מרג'ורי - תרגום ואפוסטיל",
                description: "טיפול בתרגום, בדיקת מסמכים, אפוסטיל, בירור התאמה לגרמניה",
                type: "academic",
                priority: "medium",
                client: "מרג'ורי תרגום",
                status: "in_progress",
                notes: "מהלך מתגלגל - השלמות מול הלקוחה"
            },
            { 
                title: "כרמית - סמינריון עם הוספת מאמרים",
                description: "הוספת מאמרים לסמינריון (צריך 8 מאמרים, להוסיף עוד 3), הפקת מסמך",
                type: "academic",
                priority: "high",
                client: "כרמית סמינר",
                status: "urgent",
                deadline: "מחר בערב",
                notes: "טרם הגשה - דחוף!"
            },
            { 
                title: "עבודה סמינריונית קבוצתית",
                description: "סיום עבודה, מתן תמיכה אקדמית, פתרונות למשבר בין חברות",
                type: "academic",
                priority: "low",
                client: "קבוצת סמינריון",
                status: "pending",
                notes: "אין דדליין ספציפי"
            },
            { 
                title: "ישראל - סמינר וועדה",
                description: "שליחת טיוטות, אישור ועדה, טיפול במסמכים, התקדמות לפי הערות",
                type: "academic",
                priority: "high",
                client: "ישראל סמינר",
                status: "urgent",
                notes: "לא נשאר הרבה זמן.."
            },
            
            // Debt tasks
            { 
                title: "coeo Inkasso - Ostrom GmbH",
                description: "התנגדות לחוב חברת חשמל גרמנית",
                type: "debts",
                priority: "medium",
                amount: "455€",
                caseNumber: "1660002492",
                status: "in_dispute",
                notes: "בהתנגדות פעילה / בשלבי טיפול"
            },
            { 
                title: "PAIR Finance - Free2Move",
                description: "חוב שכירות רכב",
                type: "debts",
                priority: "medium",
                amount: "45-69€",
                caseNumber: "162857501033",
                status: "unpaid",
                notes: "לא שולם, ממשיכים בהליכי גביה"
            },
            { 
                title: "PAIR Finance - Novum Bank Cashper",
                description: "חוב בנק",
                type: "debts",
                priority: "medium",
                amount: "208.60€",
                caseNumber: "168775195683",
                status: "settlement_offered",
                notes: "לא שולם, נשלחו הצעות פשרה"
            },
            { 
                title: "רשות האכיפה והגבייה - משרד הביטחון",
                description: "חוב למשרד הביטחון דרך הוצאה לפועל",
                type: "debts",
                priority: "high",
                amount: "₪7,355.17",
                caseNumber: "774243-03-25",
                status: "pending",
                notes: "תיק טרום חוב/התראה/פתוח"
            },
            { 
                title: "מנורה מבטחים - חובות ביטוח",
                description: "חובות על מספר פוליסות ביטוח",
                type: "debts",
                priority: "medium",
                amount: "₪330.43 + ₪326.02 + ₪85.21",
                status: "pending",
                notes: "פתוח/דרישת תשלום עבור מספר פוליסות ביטוח"
            },
            
            // Bureaucracy tasks
            { 
                title: "TK - קופת חולים גרמניה",
                description: "בירור בקשה/התנגדות בקופת חולים",
                type: "bureaucracy",
                priority: "medium",
                caseNumber: "B268202260",
                status: "pending",
                notes: "בתהליך בירור בקשה/התנגדות"
            },
            { 
                title: "ביטוח לאומי - הגשת מסמכים",
                description: "הגשת מסמכים וטיפול בתיק",
                type: "bureaucracy",
                priority: "medium",
                caseNumber: "897777",
                status: "pending",
                notes: "הגשת מסמכים/בתהליכי בדיקה"
            },
            { 
                title: "רשות האכיפה והגבייה - קנסות",
                description: "טיפול בקנסות ופניות",
                type: "bureaucracy",
                priority: "medium",
                caseNumber: "164025",
                status: "pending",
                notes: "טיפול בפניות/בחינה"
            }
        ];

        function showStatus(message, type = 'loading') {
            const status = document.getElementById('status');
            status.innerHTML = message;
            status.className = type;
        }

        function previewTasks() {
            showStatus(`🎯 מוכן להוסיף ${tasks.length} משימות למערכת`, 'success');
        }

        function clearForm() {
            showStatus('', '');
        }

        async function addAllTasks() {
            showStatus('⏳ מוסיף משימות למערכת...', 'loading');
            
            try {
                const response = await fetch('/api/tasks/bulk', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ tasks })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                
                if (result.success) {
                    showStatus(`✅ הצלחה! ${result.created} משימות נוספו למערכת`, 'success');
                    setTimeout(() => {
                        window.location.href = '/';
                    }, 3000);
                } else {
                    showStatus(`❌ שגיאה: ${result.error}`, 'error');
                }
            } catch (error) {
                showStatus(`❌ שגיאה בחיבור: ${error.message}`, 'error');
            }
        }

        // Auto preview on load
        window.onload = () => previewTasks();
    </script>
</body>
</html>